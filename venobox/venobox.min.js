/*
 * VenoBox - jQuery Plugin
 * version: 1.8.3
 * @requires jQuery >= 1.7.0
 * @license
 *
 * Examples at http://veno.es/venobox/
 * License: MIT License
 * License URI: https://github.com/nicolafranchini/VenoBox/blob/master/LICENSE
 * Copyright 2013-2017 Nicola Franchini - @nicolafranchini
 *
 */
!function(y){"use strict";var w,C,_,B,P,E,O,D,M,N,U,V,I,z,R,X,Y,j,W,q,$,A,H,Q,S,T,Z,F,G,J,K,L,ee,se,ie,ae,ce,oe,te,de,le;y.fn.extend({venobox:function(e){var g=this,x=y.extend({arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",gallItems:!1,infinigall:!1,htmlClose:"&times;",htmlNext:"<span>Next</span>",htmlPrev:"<span>Prev</span>",numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",cb_pre_open:function(){return!0},cb_post_open:function(){},cb_pre_close:function(){return!0},cb_post_close:function(){},cb_post_resize:function(){},cb_after_nav:function(){},cb_init:function(){}},e);return x.cb_init(g),this.each(function(){if((G=y(this)).data("venobox"))return!0;function s(){$=G.data("gall"),Y=G.data("numeratio"),V=G.data("gallItems"),I=G.data("infinigall"),z=V||y('.vbox-item[data-gall="'+$+'"]'),A=z.eq(z.index(G)+1),H=z.eq(z.index(G)-1),A.length||!0!==I||(A=z.eq(0)),1<z.length?(J=z.index(G)+1,_.html(J+" / "+z.length)):J=1,!0===Y?_.show():_.hide(),""!==q?B.show():B.hide(),A.length||!0===I?(y(".vbox-next").css("display","block"),Q=!0):(y(".vbox-next").css("display","none"),Q=!1),0<z.index(G)||!0===I?(y(".vbox-prev").css("display","block"),S=!0):(y(".vbox-prev").css("display","none"),S=!1),!0!==S&&!0!==Q||(O.on(l.DOWN,o),O.on(l.MOVE,t),O.on(l.UP,d))}function a(e){return!(e.length<1)&&(!R&&(R=!0,j=e.data("overlay")||e.data("overlaycolor"),N=e.data("framewidth"),U=e.data("frameheight"),P=e.data("border"),C=e.data("bgcolor"),D=e.data("href")||e.attr("href"),w=e.data("autoplay"),q=e.attr(e.data("titleattr"))||"",e===H&&O.addClass("animated").addClass("swipe-right"),e===A&&O.addClass("animated").addClass("swipe-left"),Z.show(),void O.animate({opacity:0},500,function(){W.css("background",j),O.removeClass("animated").removeClass("swipe-left").removeClass("swipe-right").css({"margin-left":0,"margin-right":0}),"iframe"==e.data("vbtype")?b():"inline"==e.data("vbtype")?p():"ajax"==e.data("vbtype")?u():"video"==e.data("vbtype")?k(w):(O.html('<img src="'+D+'">'),m()),G=e,s(),R=!1,x.cb_after_nav(G,J,A,H)})))}function i(e){27===e.keyCode&&c(),37==e.keyCode&&!0===S&&a(H),39==e.keyCode&&!0===Q&&a(A)}function c(){if(!1===x.cb_pre_close(G,J,A,H))return!1;y("body").off("keydown",i).removeClass("vbox-open"),G.focus(),W.animate({opacity:0},500,function(){W.remove(),R=!1,x.cb_post_close()})}g.VBclose=function(){c()},G.addClass("vbox-item"),G.data("framewidth",x.framewidth),G.data("frameheight",x.frameheight),G.data("border",x.border),G.data("bgcolor",x.bgcolor),G.data("numeratio",x.numeratio),G.data("gallItems",x.gallItems),G.data("infinigall",x.infinigall),G.data("overlaycolor",x.overlayColor),G.data("titleattr",x.titleattr),G.data("venobox",!0),G.on("click",function(e){if(e.preventDefault(),G=y(this),!1===x.cb_pre_open(G))return!1;switch(g.VBnext=function(){a(A)},g.VBprev=function(){a(H)},j=G.data("overlay")||G.data("overlaycolor"),N=G.data("framewidth"),U=G.data("frameheight"),w=G.data("autoplay")||x.autoplay,P=G.data("border"),C=G.data("bgcolor"),R=S=Q=!1,D=G.data("href")||G.attr("href"),M=G.data("css")||"",q=G.attr(G.data("titleattr"))||"",T='<div class="vbox-preloader">',x.spinner){case"rotating-plane":T+='<div class="sk-rotating-plane"></div>';break;case"double-bounce":T+='<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>';break;case"wave":T+='<div class="sk-wave"><div class="sk-rect sk-rect1"></div><div class="sk-rect sk-rect2"></div><div class="sk-rect sk-rect3"></div><div class="sk-rect sk-rect4"></div><div class="sk-rect sk-rect5"></div></div>';break;case"wandering-cubes":T+='<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>';break;case"spinner-pulse":T+='<div class="sk-spinner sk-spinner-pulse"></div>';break;case"chasing-dots":T+='<div class="sk-chasing-dots"><div class="sk-child sk-dot1"></div><div class="sk-child sk-dot2"></div></div>';break;case"three-bounce":T+='<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>';break;case"circle":T+='<div class="sk-circle"><div class="sk-circle1 sk-child"></div><div class="sk-circle2 sk-child"></div><div class="sk-circle3 sk-child"></div><div class="sk-circle4 sk-child"></div><div class="sk-circle5 sk-child"></div><div class="sk-circle6 sk-child"></div><div class="sk-circle7 sk-child"></div><div class="sk-circle8 sk-child"></div><div class="sk-circle9 sk-child"></div><div class="sk-circle10 sk-child"></div><div class="sk-circle11 sk-child"></div><div class="sk-circle12 sk-child"></div></div>';break;case"cube-grid":T+='<div class="sk-cube-grid"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div>';break;case"fading-circle":T+='<div class="sk-fading-circle"><div class="sk-circle1 sk-circle"></div><div class="sk-circle2 sk-circle"></div><div class="sk-circle3 sk-circle"></div><div class="sk-circle4 sk-circle"></div><div class="sk-circle5 sk-circle"></div><div class="sk-circle6 sk-circle"></div><div class="sk-circle7 sk-circle"></div><div class="sk-circle8 sk-circle"></div><div class="sk-circle9 sk-circle"></div><div class="sk-circle10 sk-circle"></div><div class="sk-circle11 sk-circle"></div><div class="sk-circle12 sk-circle"></div></div>';break;case"folding-cube":T+='<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>'}return T+="</div>",F='<a class="vbox-next">'+x.htmlNext+'</a><a class="vbox-prev">'+x.htmlPrev+"</a>",L='<div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">'+x.htmlClose+"</div>",E='<div class="vbox-overlay '+M+'" style="background:'+j+'">'+T+'<div class="vbox-container"><div class="vbox-content"></div></div>'+L+F+"</div>",y("body").append(E).addClass("vbox-open"),y(".vbox-preloader div:not(.sk-circle) .sk-child, .vbox-preloader .sk-rotating-plane, .vbox-preloader .sk-rect, .vbox-preloader div:not(.sk-folding-cube) .sk-cube, .vbox-preloader .sk-spinner-pulse").css("background-color",x.spinColor),W=y(".vbox-overlay"),y(".vbox-container"),O=y(".vbox-content"),_=y(".vbox-num"),B=y(".vbox-title"),(Z=y(".vbox-preloader")).show(),B.css(x.titlePosition,"-1px"),B.css({color:x.titleColor,"background-color":x.titleBackground}),y(".vbox-close").css({color:x.closeColor,"background-color":x.closeBackground}),y(".vbox-num").css(x.numerationPosition,"-1px"),y(".vbox-num").css({color:x.numerationColor,"background-color":x.numerationBackground}),y(".vbox-next span, .vbox-prev span").css({"border-top-color":x.arrowsColor,"border-right-color":x.arrowsColor}),O.html(""),O.css("opacity","0"),W.css("opacity","0"),s(),W.animate({opacity:1},250,function(){"iframe"==G.data("vbtype")?b():"inline"==G.data("vbtype")?p():"ajax"==G.data("vbtype")?u():"video"==G.data("vbtype")?k(w):(O.html('<img src="'+D+'">'),m()),x.cb_post_open(G,J,A,H)}),y("body").keydown(i),y(".vbox-prev").on("click",function(){a(H)}),y(".vbox-next").on("click",function(){a(A)}),!1});var e=".vbox-overlay";function o(e){O.addClass("animated"),se=ae=e.pageY,ie=ce=e.pageX,K=!0}function t(e){if(!0===K){ce=e.pageX,ae=e.pageY,te=ce-ie,de=ae-se;var s=Math.abs(te);Math.abs(de)<s&&s<=100&&(e.preventDefault(),O.css("margin-left",te))}}function d(e){if(!0===K){var s=G,i=K=!1;(oe=ce-ie)<0&&!0===Q&&(s=A,i=!0),0<oe&&!0===S&&(s=H,i=!0),Math.abs(oe)>=le&&!0===i?a(s):O.css({"margin-left":0,"margin-right":0})}}x.overlayClose||(e=".vbox-close"),y("body").on("click",e,function(e){(y(e.target).is(".vbox-overlay")||y(e.target).is(".vbox-content")||y(e.target).is(".vbox-close")||y(e.target).is(".vbox-preloader"))&&c()}),oe=ce=ie=0,K=!(le=50);var l={DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"},r=function(e){var s;switch(e.type){case"mousedown":s=l.DOWN;break;case"mouseup":case"mouseout":s=l.UP;break;case"mousemove":s=l.MOVE;break;default:return}var i=v(s,e,e.pageX,e.pageY);y(e.target).trigger(i)},n=function(e){var s;switch(e.type){case"touchstart":s=l.DOWN;break;case"touchend":s=l.UP;break;case"touchmove":s=l.MOVE;break;default:return}var i,a=e.originalEvent.touches[0];i=s==l.UP?v(s,e,null,null):v(s,e,a.pageX,a.pageY),y(e.target).trigger(i)},v=function(e,s,i,a){return y.Event(e,{pageX:i,pageY:a,originalEvent:s})};function u(){y.ajax({url:D,cache:!1}).done(function(e){O.html('<div class="vbox-inline">'+e+"</div>"),m()}).fail(function(){O.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),h()})}function b(){O.html('<iframe class="venoframe" src="'+D+'"></iframe>'),h()}function k(e){var s,i=function(e){var s;e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),-1<RegExp.$3.indexOf("youtu")?s="youtube":-1<RegExp.$3.indexOf("vimeo")&&(s="vimeo");return{type:s,id:RegExp.$6}}(D),a=(e?"?rel=0&autoplay=1":"?rel=0")+function(e){var s="",i=decodeURIComponent(e).split("?");if(void 0!==i[1]){var a,c,o=i[1].split("&");for(c=0;c<o.length;c++)a=o[c].split("="),s=s+"&"+a[0]+"="+a[1]}return encodeURI(s)}(D);"vimeo"==i.type?s="https://player.vimeo.com/video/":"youtube"==i.type&&(s="https://www.youtube.com/embed/"),O.html('<iframe class="venoframe vbvid" webkitallowfullscreen mozallowfullscreen allowfullscreen allow="autoplay" frameborder="0" src="'+s+i.id+a+'"></iframe>'),h()}function p(){O.html('<div class="vbox-inline">'+y(D).html()+"</div>"),h()}function m(){(ee=O.find("img")).length?ee.each(function(){y(this).one("load",function(){h()})}):h()}function h(){B.html(q),O.find(">:first-child").addClass("figlio").css({width:N,height:U,padding:P,background:C}),y("img.figlio").on("dragstart",function(e){e.preventDefault()}),f(),O.animate({opacity:"1"},"slow",function(){Z.hide()})}function f(){var e=O.outerHeight(),s=y(window).height();X=e+60<s?(s-e)/2:"30px",O.css("margin-top",X),O.css("margin-bottom",X),x.cb_post_resize()}"ontouchstart"in window?(y(document).on("touchstart",n),y(document).on("touchmove",n),y(document).on("touchend",n)):(y(document).on("mousedown",r),y(document).on("mouseup",r),y(document).on("mouseout",r),y(document).on("mousemove",r)),y(window).resize(function(){y(".vbox-content").length&&setTimeout(f(),800)})})}})}(jQuery);