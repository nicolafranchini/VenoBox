/*
 * VenoBox - jQuery Plugin
 * version: 1.8.3
 * @requires jQuery >= 1.7.0
 *
 * Examples at http://veno.es/venobox/
 * License: MIT License
 * License URI: https://github.com/nicolafranchini/VenoBox/blob/master/LICENSE
 * Copyright 2013-2017 Nicola Franchini - @nicolafranchini
 *
 */
!function(e){"use strict";var s,i,c,a,o,t,d,l,r,n,v,u,b,k,p,m,f,h,g,x,y,w,C,_,B,P,E,O,D,M,N,U,V,z,R,X,Y,j,W,q;e.fn.extend({venobox:function($){var I=this,A={arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",infinigall:!1,htmlClose:"&times;",htmlNext:"<span>Next</span>",htmlPrev:"<span>Prev</span>",numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",cb_pre_open:function(){return!0},cb_post_open:function(){},cb_pre_close:function(){return!0},cb_post_close:function(){},cb_post_resize:function(){},cb_after_nav:function(){},cb_init:function(){}},H=e.extend(A,$);return H.cb_init(I),this.each(function(){function $(){y=O.data("gall"),f=O.data("numeratio"),b=O.data("infinigall"),k=e('.vbox-item[data-gall="'+y+'"]'),w=k.eq(k.index(O)+1),C=k.eq(k.index(O)-1),w.length||!0!==b||(w=k.eq(0)),k.length>1?(D=k.index(O)+1,c.html(D+" / "+k.length)):D=1,!0===f?c.show():c.hide(),""!==x?a.show():a.hide(),w.length||!0===b?(e(".vbox-next").css("display","block"),_=!0):(e(".vbox-next").css("display","none"),_=!1),k.index(O)>0||!0===b?(e(".vbox-prev").css("display","block"),B=!0):(e(".vbox-prev").css("display","none"),B=!1),!0!==B&&!0!==_||(l.on(te.DOWN,T),l.on(te.MOVE,Z),l.on(te.UP,F))}function A(e){return!(e.length<1)&&(!p&&(p=!0,h=e.data("overlay")||e.data("overlaycolor"),v=e.data("framewidth"),u=e.data("frameheight"),o=e.data("border"),i=e.data("bgcolor"),r=e.data("href")||e.attr("href"),s=e.data("autoplay"),x=e.attr(e.data("titleattr"))||"",e===C&&l.addClass("animated").addClass("swipe-right"),e===w&&l.addClass("animated").addClass("swipe-left"),void l.animate({opacity:0},500,function(){g.css("background",h),l.removeClass("animated").removeClass("swipe-left").removeClass("swipe-right").css({"margin-left":0,"margin-right":0}),"iframe"==e.data("vbtype")?J():"inline"==e.data("vbtype")?se():"ajax"==e.data("vbtype")?G():"video"==e.data("vbtype")||"vimeo"==e.data("vbtype")||"youtube"==e.data("vbtype")?K(s):(l.html('<img src="'+r+'">'),ie()),O=e,$(),p=!1,H.cb_after_nav(O,D,w,C)})))}function Q(e){27===e.keyCode&&S(),37==e.keyCode&&!0===B&&A(C),39==e.keyCode&&!0===_&&A(w)}function S(){if(!1===H.cb_pre_close(O,D,w,C))return!1;e("body").off("keydown",Q).removeClass("vbox-open"),O.focus(),g.animate({opacity:0},500,function(){g.remove(),p=!1,H.cb_post_close()})}function T(e){l.addClass("animated"),V=R=e.pageY,z=X=e.pageX,M=!0}function Z(e){if(!0===M){X=e.pageX,R=e.pageY,j=X-z,W=R-V;var s=Math.abs(j);s>Math.abs(W)&&s<=100&&(e.preventDefault(),l.css("margin-left",j))}}function F(e){if(!0===M){M=!1;var s=O,i=!1;(Y=X-z)<0&&!0===_&&(s=w,i=!0),Y>0&&!0===B&&(s=C,i=!0),Math.abs(Y)>=q&&!0===i?A(s):l.css({"margin-left":0,"margin-right":0})}}function G(){e.ajax({url:r,cache:!1}).done(function(e){l.html('<div class="vbox-inline">'+e+"</div>"),ie()}).fail(function(){l.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),ce()})}function J(){l.html('<iframe class="venoframe" src="'+r+'"></iframe>'),ce()}function K(e){var s,i=L(r),c=(e?"?rel=0&autoplay=1":"?rel=0")+ee(r);"vimeo"==i.type?s="https://player.vimeo.com/video/":"youtube"==i.type&&(s="https://www.youtube.com/embed/"),l.html('<iframe class="venoframe vbvid" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0" src="'+s+i.id+c+'"></iframe>'),ce()}function L(e){if(e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),RegExp.$3.indexOf("youtu")>-1)s="youtube";else if(RegExp.$3.indexOf("vimeo")>-1)var s="vimeo";return{type:s,id:RegExp.$6}}function ee(e){var s="",i=decodeURIComponent(e).split("?");if(void 0!==i[1]){var c,a,o=i[1].split("&");for(a=0;a<o.length;a++)s=s+"&"+(c=o[a].split("="))[0]+"="+c[1]}return encodeURI(s)}function se(){l.html('<div class="vbox-inline">'+e(r).html()+"</div>"),ce()}function ie(){(U=l.find("img")).length?U.each(function(){e(this).one("load",function(){ce()})}):ce()}function ce(){a.html(x),l.find(">:first-child").addClass("figlio").css({width:v,height:u,padding:o,background:i}),e("img.figlio").on("dragstart",function(e){e.preventDefault()}),ae(),l.animate({opacity:"1"},"slow",function(){})}function ae(){var s=l.outerHeight(),i=e(window).height();m=s+60<i?(i-s)/2:"30px",l.css("margin-top",m),l.css("margin-bottom",m),H.cb_post_resize()}if((O=e(this)).data("venobox"))return!0;I.VBclose=function(){S()},O.addClass("vbox-item"),O.data("framewidth",H.framewidth),O.data("frameheight",H.frameheight),O.data("border",H.border),O.data("bgcolor",H.bgcolor),O.data("numeratio",H.numeratio),O.data("infinigall",H.infinigall),O.data("overlaycolor",H.overlayColor),O.data("titleattr",H.titleattr),O.data("venobox",!0),O.on("click",function(b){if(b.preventDefault(),O=e(this),!1===H.cb_pre_open(O))return!1;switch(I.VBnext=function(){A(w)},I.VBprev=function(){A(C)},h=O.data("overlay")||O.data("overlaycolor"),v=O.data("framewidth"),u=O.data("frameheight"),s=O.data("autoplay")||H.autoplay,o=O.data("border"),i=O.data("bgcolor"),_=!1,B=!1,p=!1,r=O.data("href")||O.attr("href"),n=O.data("css")||"",x=O.attr(O.data("titleattr"))||"",P='<div class="vbox-preloader">',H.spinner){case"rotating-plane":P+='<div class="sk-rotating-plane"></div>';break;case"double-bounce":P+='<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>';break;case"wave":P+='<div class="sk-wave"><div class="sk-rect sk-rect1"></div><div class="sk-rect sk-rect2"></div><div class="sk-rect sk-rect3"></div><div class="sk-rect sk-rect4"></div><div class="sk-rect sk-rect5"></div></div>';break;case"wandering-cubes":P+='<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>';break;case"spinner-pulse":P+='<div class="sk-spinner sk-spinner-pulse"></div>';break;case"three-bounce":P+='<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>';break;case"cube-grid":P+='<div class="sk-cube-grid"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div>';break;case"chasing-dots":P+='<div class="sk-chasing-dots"><div class="sk-child sk-dot1"></div><div class="sk-child sk-dot2"></div></div>';break;case"circle":P+='<div class="sk-circle"><div class="sk-circle1 sk-child"></div><div class="sk-circle2 sk-child"></div><div class="sk-circle3 sk-child"></div><div class="sk-circle4 sk-child"></div><div class="sk-circle5 sk-child"></div><div class="sk-circle6 sk-child"></div><div class="sk-circle7 sk-child"></div><div class="sk-circle8 sk-child"></div><div class="sk-circle9 sk-child"></div><div class="sk-circle10 sk-child"></div><div class="sk-circle11 sk-child"></div><div class="sk-circle12 sk-child"></div></div>';break;case"fading-circle":P+='<div class="sk-fading-circle"><div class="sk-circle1 sk-circle"></div><div class="sk-circle2 sk-circle"></div><div class="sk-circle3 sk-circle"></div><div class="sk-circle4 sk-circle"></div><div class="sk-circle5 sk-circle"></div><div class="sk-circle6 sk-circle"></div><div class="sk-circle7 sk-circle"></div><div class="sk-circle8 sk-circle"></div><div class="sk-circle9 sk-circle"></div><div class="sk-circle10 sk-circle"></div><div class="sk-circle11 sk-circle"></div><div class="sk-circle12 sk-circle"></div></div>';break;case"folding-cube":P+='<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>'}return P+="</div>",E='<a class="vbox-next">'+H.htmlNext+'</a><a class="vbox-prev">'+H.htmlPrev+"</a>",N='<div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">'+H.htmlClose+"</div>",t='<div class="vbox-overlay '+n+'" style="background:'+h+'">'+P+'<div class="vbox-container"><div class="vbox-content"></div></div>'+N+E+"</div>",e("body").append(t).addClass("vbox-open"),e(".vbox-preloader div:not(.sk-circle) .sk-child, .vbox-preloader .sk-rotating-plane, .vbox-preloader .sk-rect, .vbox-preloader div:not(.sk-folding-cube) .sk-cube, .vbox-preloader .sk-spinner-pulse").css("background-color",H.spinColor),g=e(".vbox-overlay"),d=e(".vbox-container"),l=e(".vbox-content"),c=e(".vbox-num"),(a=e(".vbox-title")).css(H.titlePosition,"-1px"),a.css({color:H.titleColor,"background-color":H.titleBackground}),e(".vbox-close").css({color:H.closeColor,"background-color":H.closeBackground}),e(".vbox-num").css(H.numerationPosition,"-1px"),e(".vbox-num").css({color:H.numerationColor,"background-color":H.numerationBackground}),e(".vbox-next span, .vbox-prev span").css({"border-top-color":H.arrowsColor,"border-right-color":H.arrowsColor}),l.html(""),l.css("opacity","0"),g.css("opacity","0"),$(),g.animate({opacity:1},250,function(){"iframe"==O.data("vbtype")?J():"inline"==O.data("vbtype")?se():"ajax"==O.data("vbtype")?G():"video"==O.data("vbtype")||"vimeo"==O.data("vbtype")||"youtube"==O.data("vbtype")?K(s):(l.html('<img src="'+r+'">'),ie()),H.cb_post_open(O,D,w,C)}),e("body").keydown(Q),e(".vbox-prev").on("click",function(){A(C)}),e(".vbox-next").on("click",function(){A(w)}),!1});var oe=".vbox-overlay";H.overlayClose||(oe=".vbox-close"),e(document).on("click",oe,function(s){(e(s.target).is(".vbox-overlay")||e(s.target).is(".vbox-content")||e(s.target).is(".vbox-close")||e(s.target).is(".vbox-preloader"))&&S()}),z=0,X=0,Y=0,q=50,M=!1;var te={DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"},de=function(s){var i;switch(s.type){case"mousedown":i=te.DOWN;break;case"mouseup":case"mouseout":i=te.UP;break;case"mousemove":i=te.MOVE;break;default:return}var c=re(i,s,s.pageX,s.pageY);e(s.target).trigger(c)},le=function(s){var i;switch(s.type){case"touchstart":i=te.DOWN;break;case"touchend":i=te.UP;break;case"touchmove":i=te.MOVE;break;default:return}var c,a=s.originalEvent.touches[0];c=i==te.UP?re(i,s,null,null):re(i,s,a.pageX,a.pageY),e(s.target).trigger(c)},re=function(s,i,c,a){return e.Event(s,{pageX:c,pageY:a,originalEvent:i})};"ontouchstart"in window?(e(document).on("touchstart",le),e(document).on("touchmove",le),e(document).on("touchend",le)):(e(document).on("mousedown",de),e(document).on("mouseup",de),e(document).on("mouseout",de),e(document).on("mousemove",de)),e(window).resize(function(){e(".vbox-content").length&&setTimeout(ae(),800)})})}})}(jQuery);