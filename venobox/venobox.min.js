/*
 * VenoBox - jQuery Plugin
 * version: 1.5.3
 * @requires jQuery
 *
 * Examples at http://lab.veno.it/venobox/
 * License: MIT License
 * License URI: https://github.com/nicolafranchini/VenoBox/blob/master/LICENSE
 * Copyright 2013-2015 Nicola Franchini - @nicolafranchini
 *
 */
!function(t){function a(){t.ajax({url:x,cache:!1}).done(function(t){h.html('<div class="vbox-inline">'+t+"</div>"),r(!0)}).fail(function(){h.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),r(!0)})}function e(){h.html('<iframe class="venoframe" src="'+x+'"></iframe>'),r()}function i(){var t=x.split("/"),a=t[t.length-1];h.html('<iframe class="venoframe" src="//player.vimeo.com/video/'+a+'"></iframe>'),r()}function o(){var t=x.split("/"),a=t[t.length-1];h.html('<iframe class="venoframe" allowfullscreen src="//www.youtube.com/embed/'+a+'"></iframe>'),r()}function n(){h.html('<div class="vbox-inline">'+t(x).html()+"</div>"),r()}function d(){P=t(".vbox-content").find("img"),P.one("load",function(){r()}).each(function(){this.complete&&t(this).load()})}function r(){v.html(Q),h.find(">:first-child").addClass("figlio"),t(".figlio").css("width",k).css("height",C).css("padding",m).css("background",s),G=h.outerHeight(),F=t(window).height(),F>G+80?(z=(F-G)/2,h.css("margin-top",z),h.css("margin-bottom",z)):(h.css("margin-top","40px"),h.css("margin-bottom","40px")),h.animate({opacity:"1"},"slow")}function l(){t(".vbox-content").length&&(G=h.height(),F=t(window).height(),F>G+80?(z=(F-G)/2,h.css("margin-top",z),h.css("margin-bottom",z)):(h.css("margin-top","40px"),h.css("margin-bottom","40px")))}var s,c,v,m,b,f,h,x,g,u,p,y,w,k,C,j,q,H,z,D,E,L,P,Q,X,A,B,F,G,I,J,K,M;t.fn.extend({venobox:function(r){var l={framewidth:"",frameheight:"",border:"0",bgcolor:"#fff",titleattr:"title",numeratio:!1,infinigall:!1,overlayclose:!0},z=t.extend(l,r);return this.each(function(){var r=t(this);return r.data("venobox")?!0:(r.addClass("vbox-item"),r.data("framewidth",z.framewidth),r.data("frameheight",z.frameheight),r.data("border",z.border),r.data("bgcolor",z.bgcolor),r.data("numeratio",z.numeratio),r.data("infinigall",z.infinigall),r.data("overlayclose",z.overlayclose),r.data("venobox",!0),void r.click(function(l){function P(){X=r.data("gall"),D=r.data("numeratio"),j=r.data("infinigall"),q=t('.vbox-item[data-gall="'+X+'"]'),q.length>0&&D===!0?(c.html(q.index(r)+1+" / "+q.length),c.show()):c.hide(),A=q.eq(q.index(r)+1),B=q.eq(q.index(r)-1),r.attr(z.titleattr)?(Q=r.attr(z.titleattr),v.show()):(Q="",v.hide()),q.length>0&&j===!0?(I=!0,J=!0,A.length<1&&(A=q.eq(0)),q.index(r)<1&&(B=q.eq(q.index(q.length)))):(A.length>0?(t(".vbox-next").css("display","block"),I=!0):(t(".vbox-next").css("display","none"),I=!1),q.index(r)>0?(t(".vbox-prev").css("display","block"),J=!0):(t(".vbox-prev").css("display","none"),J=!1))}function F(t){27===t.keyCode&&G()}function G(){t("body").removeClass("vbox-open"),t("body").unbind("keydown",F),L.animate({opacity:0},500,function(){L.remove(),H=!1,r.focus()})}l.stopPropagation(),l.preventDefault(),r=t(this),E=r.data("overlay"),k=r.data("framewidth"),C=r.data("frameheight"),m=r.data("border"),s=r.data("bgcolor"),I=!1,J=!1,H=!1,x=r.attr("href"),y=r.data("css")||"",t("body").addClass("vbox-open"),b='<div class="vbox-overlay '+y+'" style="background:'+E+'"><div class="vbox-preloader">Loading...</div><div class="vbox-container"><div class="vbox-content"></div></div><div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">X</div><div class="vbox-next">next</div><div class="vbox-prev">prev</div></div>',t("body").append(b),L=t(".vbox-overlay"),f=t(".vbox-container"),h=t(".vbox-content"),c=t(".vbox-num"),v=t(".vbox-title"),K=t(".vbox-prev"),M=t(".vbox-next");var N=r.data("gall");N&&(1==t('[data-gall="'+N+'"]').length?(K.addClass("vbox-hidden"),M.addClass("vbox-hidden"),H=!0):(K.removeClass("vbox-hidden"),M.removeClass("vbox-hidden"),H=!1)),h.html(""),h.css("opacity","0"),P(),L.css("min-height",t(window).outerHeight()),L.animate({opacity:1},250,function(){"iframe"==r.data("type")?e():"inline"==r.data("type")?n():"ajax"==r.data("type")?a():"vimeo"==r.data("type")?i():"youtube"==r.data("type")?o():(h.html('<img src="'+x+'">'),d())});var O={prev:function(){H||(H=!0,E=B.data("overlay"),k=B.data("framewidth"),C=B.data("frameheight"),m=B.data("border"),s=B.data("bgcolor"),x=B.attr("href"),Q=B.attr(z.titleattr)?B.attr(z.titleattr):"",void 0===E&&(E=""),h.animate({opacity:0},500,function(){L.css("background",E),"iframe"==B.data("type")?e():"inline"==B.data("type")?n():"ajax"==B.data("type")?a():"youtube"==B.data("type")?o():"vimeo"==B.data("type")?i():(h.html('<img src="'+x+'">'),d()),r=B,P(),H=!1}))},next:function(){H||(H=!0,E=A.data("overlay"),k=A.data("framewidth"),C=A.data("frameheight"),m=A.data("border"),s=A.data("bgcolor"),x=A.attr("href"),Q=A.attr(z.titleattr)?A.attr(z.titleattr):"",void 0===E&&(E=""),h.animate({opacity:0},500,function(){L.css("background",E),"iframe"==A.data("type")?e():"inline"==A.data("type")?n():"ajax"==A.data("type")?a():"youtube"==A.data("type")?o():"vimeo"==A.data("type")?i():(h.html('<img src="'+x+'">'),d()),r=A,P(),H=!1}))}};t("body").keydown(function(t){37==t.keyCode&&1==J&&O.prev(),39==t.keyCode&&1==I&&O.next()}),t(".vbox-prev").click(function(){O.prev()}),t(".vbox-next").click(function(){O.next()});var R=".vbox-close, .vbox-overlay";return r.data("overlayclose")||(R=".vbox-close"),t(R).click(function(a){g=".figlio",p=".vbox-prev",u=".vbox-next",w=".figlio *",t(a.target).is(g)||t(a.target).is(u)||t(a.target).is(p)||t(a.target).is(w)||G()}),t("body").keydown(F),!1}))})}}),t(window).resize(function(){l()})}(jQuery);